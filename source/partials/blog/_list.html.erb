<%
image_url = article.cover_image.present? ? article.cover_image.file.width(600).height(300).fit("crop").auto("enhance").format(:jpg).to_url : ""
if image_url != ""
  css_class = "with-image"
  content_for(:css) do
    "#article-#{article.id} .post-image{ background-image: url('#{image_url}')}"
  end
else
  css_class = "no-image"
end
%>

<article class="blog-post flex items-stretch w-full md:w-1/2 <%= css_class %>">
  <div class="m-4 shadow hover:shadow-lg bg-white rounded flex flex-col w-full" id="article-<%= article.id %>">
    <% link_to "/blog/#{article.slug}/index.html", class: "post-image rounded-t bg-cover bg-no-repeat #{article.cover_position}" do %>
    <div></div>
    <% end %>
    <div class="post-info flex-auto flex flex-col">
        <% link_to "/blog/#{article.slug}/index.html", class: "flex-auto  p-4 md:p-6" do %>
          <h3 class="leading-tight mb-4"><%= article.title %></h3>
          <%= markdown(article.introduction) if article.introduction %>
        <% end %>
        <div class="p-4 border-t border-grey-light bg-grey-lightest rounded-b text-sm font-serif uppercase">
          <%= link_to article.category.name, "/category/#{article.category.slug}" %>
        </div>
    </div>
  </div>
</article>
